// Inicializa um array de pontos para cada personagem (índices 0-4)
// Coleta todas as respostas marcadas no formulário
// Para cada resposta, separa os valores (como "02" em "0" e "2") e incrementa os pontos correspondentes
// Encontra o personagem com a maior pontuação
// Exibe o resultado em um alerta com o formato solicitado (ex: "0 - P.e.k.k.a")


function calcularResultado() {
    // Inicializa o array de pontos para cada personagem: [Pekka, Prince, Gigante, Mago, Arqueira]
    let pontos = [0, 0, 0, 0, 0];
    
    // Seleciona todos os inputs de rádio marcados
    const respostas = document.querySelectorAll('input[type="radio"]:checked');
    
    // Para cada resposta marcada, processa o valor
    respostas.forEach(resposta => {
        const valor = resposta.value;
        
        // Separa os caracteres do valor (ex: "02" vira ["0", "2"])
        const indices = valor.split('');
        
        // Para cada índice, incrementa o ponto correspondente
        indices.forEach(index => {
            const indiceNum = parseInt(index);
            if (indiceNum >= 0 && indiceNum <= 4) {
                pontos[indiceNum]++;
            }
        });
    });
    
    // Encontra o índice com a maior pontuação
    let maiorPontuacao = -1;
    let indiceVencedor = 0;
    
    pontos.forEach((pontuacao, indice) => {
        if (pontuacao > maiorPontuacao) {
            maiorPontuacao = pontuacao;
            indiceVencedor = indice;
        }
    });
    
    exibirCardVencedor(indiceVencedor);
}

function exibirCardVencedor(indice) {
    // Encontra o card correspondente ao índice vencedor
    const cardOriginal = document.querySelector(`.personagem-card[data-value="${indice}"]`);
    
    if (!cardOriginal) return;
    
    // Clona o card
    const cardClone = cardOriginal.cloneNode(true);
    
    // Limpa o container e adiciona o clone
    const cardVencedor = document.getElementById('card-vencedor');
    cardVencedor.innerHTML = '';
    cardVencedor.appendChild(cardClone);
    
    // Exibe o popup
    const popup = document.getElementById('popup-vencedor');
    popup.style.display = 'flex';
    
    // Configura o botão de fechar
    document.getElementById('fechar-popup').addEventListener('click', () => {
        popup.style.display = 'none';
    });
}

function verificarRespostas() {
    // Seleciona todos os grupos de perguntas
    const gruposPerguntas = document.querySelectorAll('.quiz-question');
    
    for (const grupo of gruposPerguntas) {
        // Verifica se há algum radio button marcado neste grupo
        const respostaMarcada = grupo.querySelector('input[type="radio"]:checked');
        
        if (!respostaMarcada) {
            // Encontra o número da pergunta
            const numeroPergunta = grupo.querySelector('p').textContent.split('.')[0];
            alert(`Por favor, responda a pergunta ${numeroPergunta} antes de ver o resultado!`);
            return false;
        }
    }
    return true;
}

// Modifique a função do botão submit para verificar primeiro
document.querySelector('.submit-btn').addEventListener('click', function() {
    if (verificarRespostas()) {
        calcularResultado();
    }
});